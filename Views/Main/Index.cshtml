@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Home";
}

@model Higertech.Models.MainViewModel

@section Styles {
    @* <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"> *@
    <style>
        .hero .dynamic-text {
            transition: opacity 0.5s ease-in-out;
        }

        .carousel-item {
            transition: transform 0.5s ease-in-out;
        }
        .dark-background {
            background-color: rgba(0,0,0,0.6);
        }
        
        .portfolio-item {
            position: relative;
            overflow: hidden;
        }

        /* Menjaga rasio dan ukuran gambar seragam */
        .portfolio-content img {
            width: 100%;
            height: 250px; /* Atur tinggi gambar yang diinginkan */
            object-fit: cover; /* Memastikan gambar tetap proporsional */
        }

        /* Portfolio Info Overlay */
        .portfolio-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.6); /* Semi-transparent black overlay */
            color: #fff;
            text-align: center;
            transition: all 0.3s ease;
        }

        /* Hover effect for zoom */
        .portfolio-item:hover img {
            transform: scale(1.1); /* Zoom saat hover */
            transition: transform 0.5s ease-in-out;
        }

        /* Optional: Hover effect to show details */
        .portfolio-item:hover .portfolio-info {
            bottom: 10px; /* Sedikit naik ke atas saat hover */
        }

        .card-item {
            background: #fff;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease-in-out;
            min-height: 300px; /* Minimum height for consistency */
        }

        .card-bg {
            min-height: 300px;
            overflow: hidden;
        }

        .card-body {
            padding: 1.5rem;
        }

        .description {
            display: -webkit-box;
            -webkit-line-clamp: 3; /* Limit to 4 lines */
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Responsive adjustments */
        @@media (max-width: 1200px) {
            .col-xl-5, .col-xl-7 {
                width: 100%;
            }
            
            .card-bg {
                min-height: 200px;
            }
        }

        .yt-container {
            padding: 0 50px;
            position: relative;
        }
        
        .yt-item {
            width: 600%;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .yt-item iframe {
            width: 100%;
            aspect-ratio: 16/9;
            border: none;
        }
        
        .swiper-button-next,
        .swiper-button-prev {
            color: #000;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 30px;
            border-radius: 50%;
        }
        
        .swiper-button-next:hover,
        .swiper-button-prev:hover {
            background-color: rgba(255, 255, 255, 0.9);
        }
        
        @@media (max-width: 768px) {
            .yt-container {
                padding: 0 30px;
            }
            
            .yt-item {
                max-width: 100%;
            }
        }
    </style>
}

<!-- Hero Section -->
<section id="hero" class="hero section dark-background">
    <div class="info d-flex align-items-center">
        <div class="container">
            <div class="row justify-content-center" data-aos="fade-up" data-aos-delay="100">
                <div class="col-lg-6 text-center">
                    <h2 id="dynamicTitle" class="dynamic-text iTyped" 
                        data-typing-texts='@Html.Raw(Json.Serialize(Model.Posters.Select(p => p.Title).ToList()))'>
                    </h2>
                    <p id="dynamicDescription" class="dynamic-text">@(Model.Posters.FirstOrDefault()?.Description ?? "Welcome to Higertech")</p>
                    @if (Model.Tombol.Any())
                    {
                        <a href="#constructions" class="btn-get-started">@Model.Tombol.First().Title</a>
                    }
                </div>
            </div>
        </div>
    </div>

    <div id="hero-carousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
        @if (Model.Posters.Any())
        {
            @for (int i = 0; i < Model.Posters.Count; i++)
            {
                <div class="carousel-item @(i == 0 ? "active" : "")" 
                        data-title="@Model.Posters[i].Title"
                        data-description="@Model.Posters[i].Description">
                    <img src="@Url.Content(Model.Posters[i].Img_Url ?? "")" 
                            alt="@Model.Posters[i].Title"
                            onerror="this.src='\uploads/main/default-placeholder.jpg'">
                </div>
            }
        }

        <a class="carousel-control-prev" href="#hero-carousel" role="button" data-bs-slide="prev">
            <span class="carousel-control-prev-icon bi bi-chevron-left" aria-hidden="true"></span>
        </a>

        <a class="carousel-control-next" href="#hero-carousel" role="button" data-bs-slide="next">
            <span class="carousel-control-next-icon bi bi-chevron-right" aria-hidden="true"></span>
        </a>
    </div>
</section><!-- /Hero Section -->

<!-- Constructions Section -->
<section id="constructions" class="constructions section">
    <div class="container section-title" data-aos="fade-up">
        <h2>Aktifitas Proyek</h2>
        <p>Berbagai proyek kami untuk memastikan pengelolaan dan monitoring yang berkualitas serta berkelanjutan</p>
    </div>

    <div class="container">
        <div class="row gy-4">
            @foreach (var item in Model.Activity)
            {
                <div class="col-lg-6" data-aos="fade-up" data-aos-delay="@(100 * (Model.Activity.IndexOf(item) + 1))">
                    <div class="card-item h-100">
                        <div class="row h-100">
                            <div class="col-xl-5">
                                <div class="card-bg position-relative h-100">
                                    <img src="@item.Image" 
                                         alt="@item.Title" 
                                         class="w-100 h-100 object-fit-cover position-absolute top-0 start-0">
                                </div>
                            </div>
                            <div class="col-xl-7">
                                <div class="card-body d-flex flex-column h-100">
                                    <h4 class="card-title">@item.Title</h4>
                                    <hr>
                                    <div class="flex-grow-1">
                                        <p class="description">@item.Description</p><br>
                                    </div>
                                    <div class="mt-auto">
                                        <p class="mb-1"><strong>@item.ClientName</strong></p>
                                        <p class="mb-0"><strong>@item.DateProject</strong></p>
                                        @* <p class="mb-0"><strong>@item.DateActivity.ToString("dd MMMM yyyy", new System.Globalization.CultureInfo("id-ID"))</strong></p> *@
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section><!-- /Constructions Section -->

<!-- Services Section -->
<section id="services" class="services section light-background">
    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
        <h2>Layanan Kami</h2>
        <p>Solusi terbaik dari Higertech untuk mendukung kebutuhan industri Anda</p>
    </div><!-- End Section Title -->

    <div class="container">
        <div class="row gy-4 justify-content-center">
            @foreach (var item in Model.Layanan)
            {
                <!-- Service Item 1 -->
                <div class="col-lg-5 col-md-6" data-aos="fade-up" data-aos-delay="@(100 * (Model.Layanan.IndexOf(item) + 1))">
                    <div class="service-item position-relative">
                        <div>
                            <img src="@item.Img_Url" width="100" height="100" alt="@item.Title" >
                        </div>
                        <h3>@item.Title</h3>
                        <p align="justify">@item.Description</p>
                    </div>
                </div><!-- End Service Item -->
            }
        </div>
    </div>
</section><!-- /Services Section -->

<!-- Projects Section -->
<section id="projects" class="projects section">
    <div class="container section-title" data-aos="fade-up">
        <h2>Artikel</h2>
        <p>Informasi terbaru inovasi dan teknologi terbaik</p>
    </div>

    <div class="container">
        <div class="row gy-4">
            @* @foreach (var project in Model.Projects)
            {
                <div class="col-lg-4 col-md-6 portfolio-item">
                    <div class="portfolio-content h-100">
                        <img src="@project.Image" class="img-fluid" alt="Project Image">
                        <div class="portfolio-info">
                            <a href="@project.Image" class="glightbox preview-link"><i class="bi bi-zoom-in"></i></a>
                        </div>
                    </div>
                </div>
            } *@

            @if (Model.Articles.Count > 0)
            {
                @foreach (var artikel in Model.Articles)
                {
                    <div class="col-xl-4 col-md-6">
                        <div class="post-item position-relative h-100" data-aos="fade-up" data-aos-delay="100">
                            <div class="post-img position-relative overflow-hidden ">
                                <img src="@Url.Content(artikel.Image)" class="img-fluid  w-100 article-image" alt="">
                                <span class="post-date">@artikel.CreatedAt.ToString("MMMM dd", new System.Globalization.CultureInfo("id-ID"))</span>
                            </div>

                            <div class="post-content d-flex flex-column">
                                <h3 class="post-title">@artikel.Title</h3>
                                <div class="meta d-flex align-items-center">
                                    <div class="d-flex align-items-center">
                                        <i class="bi bi-person"></i> <span class="ps-2">@artikel.Author</span>
                                    </div>
                                    <span class="px-3 text-black-50">/</span>
                                    <div class="d-flex align-items-center">
                                        <i class="bi bi-folder2"></i> <span class="ps-2">@artikel.Category</span>
                                    </div>
                                </div>

                                <hr>
                                <a href="/article/@artikel.Slug" class="readmore stretched-link"><span>Read More</span><i
                                        class="bi bi-arrow-right"></i></a>
                            </div>
                        </div>
                    </div>

                    <!-- End post item -->

                }
            }
            else
            {
                <div class="col-12 text-center">
                    <p>No article available.</p>
                </div>
            }
        </div>
    </div>
</section><!-- /Projects Section -->

<!-- Testimonials Section -->
<section id="testimonials" class="testimonials section">
    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
        <h2>Klien Kami</h2>
        <p>Kami telah bekerja sama dan telah menjadi solusi dari berbagai kebutuhan pelanggan kami di berbagai industri</p>
    </div>

    <!-- First Swiper (Klien 1-11) -->
    <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="swiper init-swiper">
            <script type="application/json" class="swiper-config">
                {
                    "loop": true,
                    "speed": 600,
                    "autoplay": {
                        "delay": 5000,
                        "reverseDirection": true
                    },
                    "slidesPerView": "auto",
                    "direction": "horizontal",
                    "breakpoints": {
                        "320": {
                            "slidesPerView": 1,
                            "spaceBetween": 40
                        },
                        "1200": {
                            "slidesPerView": 2,
                            "spaceBetween": 20
                        }
                    }
                }
            </script>

            <div class="swiper-wrapper">
                @foreach (var klien in Model.Klien.Where(k => int.Parse(k.Title.Replace("klien-", "")) <= 11))
                {
                    <div class="swiper-slide" style="display: flex; justify-content: center; align-items: center;">
                        <div class="klien-item">
                            <img src="@klien.Img_Url" alt="@klien.Title" style="width: 450px; height: auto; margin: 10px;">
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>

    <!-- Second Swiper (Klien 12-22) -->
    <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="swiper init-swiper">
            <script type="application/json" class="swiper-config">
                {
                    "loop": true,
                    "speed": 600,
                    "autoplay": {
                        "delay": 5000,
                        "reverseDirection": false
                    },
                    "slidesPerView": "auto",
                    "direction": "horizontal",
                    "breakpoints": {
                        "320": {
                            "slidesPerView": 1,
                            "spaceBetween": 40
                        },
                        "1200": {
                            "slidesPerView": 2,
                            "spaceBetween": 20
                        }
                    }
                }
            </script>

            <div class="swiper-wrapper">
                @foreach (var klien in Model.Klien.Where(k => int.Parse(k.Title.Replace("klien-", "")) > 11))
                {
                    <div class="swiper-slide" style="display: flex; justify-content: center; align-items: center;">
                        <div class="klien-item">
                            <img src="@klien.Img_Url" alt="@klien.Title" style="width: 450px; height: auto; margin: 10px;">
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</section><!-- /Testimonials Section -->

<!-- Youtube Section  -->
<section id="youtube" class="section">
    <div class="container section-title" data-aos="fade-up">
        <h2>Video Kami</h2>
        <p>Temukan berbagai video informatif dan dokumentasi proyek kami melalui tayangan YouTube berikut</p>
    </div>

    <div class="yt-container" data-aos="fade-up" data-aos-delay="100">
        <div class="swiper init-swiper">
            <script type="application/json" class="swiper-config">
                {
                    "loop": true,
                    "speed": 600,
                    "autoplay": {
                        "delay": 5000,
                        "reverseDirection": false
                    },
                    "slidesPerView": "auto",
                    "direction": "horizontal",
                    "navigation": {
                        "nextEl": ".swiper-button-next",
                        "prevEl": ".swiper-button-prev"
                    },
                    "breakpoints": {
                        "320": {
                            "slidesPerView": 1,
                            "spaceBetween": 40
                        }
                    }
                }
            </script>

            <div class="swiper-wrapper">
                <div class="swiper-slide" style="display: flex; justify-content: center; align-items: center;">
                    <div class="yt-item">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/p5YON9LVk8M?si=4WPBCehwCs7KtkMk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="swiper-slide" style="display: flex; justify-content: center; align-items: center;">
                    <div class="yt-item">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/WTCwpLJARAg?si=MOLCTdOF9bB_vzfK" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="swiper-slide" style="display: flex; justify-content: center; align-items: center;">
                    <div class="yt-item">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/c2zksxVem-M?si=oWwPCsiGSMWzKe2m" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="swiper-slide" style="display: flex; justify-content: center; align-items: center;">
                    <div class="yt-item">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/CGqnXJ1usGA?si=J-Jw3hDvYnA5DV3d" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="swiper-slide" style="display: flex; justify-content: center; align-items: center;">
                    <div class="yt-item">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/9hmjgSV98Hk?si=8ghX45gPLxgnh1Db" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="swiper-slide" style="display: flex; justify-content: center; align-items: center;">
                    <div class="yt-item">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/CzCAPIjEuC0?si=2FPTzoSJMkiZmBUX" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>
            </div>

            <!-- Add Navigation -->
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
    </div>
</section><!-- /Youtube Section -->

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/assets/js/ityped.min.js"></script>
    <script src="~/js/pages/main/index.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const carousel = document.getElementById('hero-carousel');
            const dynamicTitle = document.getElementById('dynamicTitle');
            const dynamicDescription = document.getElementById('dynamicDescription');
            const defaultTitle = dynamicTitle.textContent;
            const defaultDescription = dynamicDescription.textContent;

            carousel.addEventListener('slide.bs.carousel', function (event) {
                const nextSlide = event.relatedTarget;
                const title = nextSlide.getAttribute('data-title') || defaultTitle;
                const description = nextSlide.getAttribute('data-description') || defaultDescription;

                dynamicTitle.style.opacity = 0;
                dynamicDescription.style.opacity = 0;

                setTimeout(() => {
                    dynamicTitle.textContent = title;
                    dynamicDescription.textContent = description;
                    dynamicTitle.style.opacity = 1;
                    dynamicDescription.style.opacity = 1;
                }, 250);
            });
        });
    </script>
}